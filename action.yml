name: 'IIS Versioned Deploy'
description: 'Allows to deploy a website on IIS with less downtime'
inputs:
  website-name:
    description: "IIS website name"
    required: true
  source-path:
    description: "The path to the source directory that will be deployed"
    required: true
  destination-path:
    description: "The path to the site directory that will be deployed"
    required: true
  number-to-keep:
    description: "Number of previous deployments to keep"
    required: false

runs:
  using: "composite"
  steps:
    - name: Deploy Application ${{ inputs.website-name }} on IIS
      shell: powershell
      run: >
        ${{ github.action_path }}/scripts/deploy.ps1
        -sourceDir ${{ inputs.source-path }}
        -siteName ${{ inputs.website-name }}
        -releaseParentDir ${{ inputs.destination-path }}
        -keep ${{ inputs.number-to-keep }}
branding:
  icon: upload-cloud
  color: blue